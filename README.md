# Leaky Integrate-and-Fire Neural Network (Verilog)

Hardware implementation of a compact spiking neural network featuring fixed-point leaky integrate-and-fire (LIF) neurons, configurable synapses, and automation for Vivado simulation, synthesis, and data visualization.

## Repository Layout
- `rtl/` – RTL sources (`lif_neuron.v`, `snn_layer.sv`, `snn_simple.sv`, Poisson stimulus generators, and the fixed-point package).
- `tb/` – Test benches covering the single neuron, two-neuron demo, fan-in experiments, and an accuracy harness.
- `scripts/` – Vivado batch scripts, plotting utilities, and captured traces/figures.
- `Makefile` – Entry points for simulation, out-of-context synthesis, and figure regeneration.
- `reports/`, `logs/` – Output directories created by Vivado (ignored by Git).

## Requirements
- Xilinx Vivado 2017.1 (64-bit) or newer with XSIM available on `PATH`.
- Python 3.10+ with `matplotlib` and `pandas` to regenerate plots from simulation traces.
- GNU make (tested with make 4.x).

## Quick Start
```bash
# Run the stimulus suite (tb/tb_snn_suite.sv) and capture traces
make sim                     # writes scripts/snn_suite_trace.csv

# Override the Poisson seed exposed to Vivado
make sim SEED=16'hBEEF

# Launch out-of-context synthesis for rtl/snn_simple.sv
make synth_ooc               # reports land in reports/

# Regenerate documentation plots from stored CSVs
make figures                 # produces PNGs under scripts/
```

Vivado batch commands are wrapped in `scripts/sim_suite.tcl` and `scripts/synth_ooc.tcl`, which keeps the GUI optional. Simulation logs are captured under `logs/` when a run fails.

## Core RTL Blocks
- `rtl/lif_pkg.vh` – Q4.12 fixed-point configuration macros reused throughout the design.
- `rtl/lif_neuron.v` – Parameterised LIF neuron with leak, threshold/reset control, refractory handling, and saturation.
- `rtl/snn_layer.sv` – Multi-neuron layer that manages per-synapse delays, conductance accumulation, spike-timing dependent plasticity (STDP), and exposes debug currents.
- `rtl/snn_simple.sv` – Two-neuron example tying Poisson stimuli into a `snn_layer` instance and forwarding observability signals.
- `rtl/poisson_spike_gen.v`, `rtl/lfsr16.v` – Deterministic pseudo-random Poisson spike sources built around an LFSR.

## Test Benches
- `tb/tb_lif_neuron.sv` – Exercises the single neuron against DC and pulsed currents.
- `tb/tb_snn_simple.v` – Couples Poisson drivers to the two-neuron example and records spike/voltage activity.
- `tb/tb_snn_suite.sv` – Scenario-based regression (step, burst, random patterns) orchestrated by `scripts/sim_suite.tcl`.
- `tb/tb_accuracy_lif.sv` – Accuracy harness invoked by `scripts/sim_accuracy.tcl` for longer Poisson runs.

The default `make sim` target builds all RTL under `rtl/` plus `tb/tb_snn_suite.sv` inside XSIM, leaving the waveform data in `scripts/snn_suite_trace.csv`.

## Plotting Traces
The plotting scripts in `scripts/` expect CSV traces produced by simulation:
- `plot_lif_neuron.py` – Single neuron membrane voltage plot.
- `plot_snn_simple.py` – Weight and spike overlay for the demo network.
- `plot_snn_suite.py` – Multi-scenario visualization used for presentation figures.

Each script reads the CSVs already present in `scripts/` or generated by `make sim` and regenerates the PNG snapshots stored alongside them.

## Cleaning Up
```bash
make clean                  # removes simulator artefacts and temporary Vivado files
```

Vivado-generated folders (for example `*.cache/`, `*.runs/`, `*.sim/`, and the `logs/` and `reports/` directories) are ignored via `.gitignore`, keeping the repository lean when you push it to GitHub.
